# Руководство по деплою на Netlify

## Предварительные требования

1. Аккаунт на [Netlify](https://netlify.com)
2. Аккаунт на [MongoDB Atlas](https://www.mongodb.com/cloud/atlas) для базы данных
3. Репозиторий с кодом на GitHub, GitLab или Bitbucket

## Настройка базы данных MongoDB Atlas

1. Зарегистрируйтесь или войдите в [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
2. Создайте новый проект и кластер MongoDB (можно использовать бесплатный тариф M0)
3. Настройте доступ к базе данных:
   - В разделе "Database Access" создайте нового пользователя с паролем
   - В разделе "Network Access" добавьте IP-адрес `0.0.0.0/0` для доступа со всех IP (или настройте более безопасные правила)
4. Получите строку подключения:
   - Нажмите "Connect" на странице вашего кластера
   - Выберите "Connect your application"
   - Скопируйте строку подключения (она понадобится позже)

## Настройка переменных окружения

Для работы приложения на Netlify необходимо настроить следующие переменные окружения:

- `MONGODB_URI` - строка подключения к MongoDB Atlas (замените `<password>` на пароль пользователя)
- `JWT_SECRET` - секретный ключ для подписи JWT-токенов (можно сгенерировать случайную строку)
- `NODE_ENV` - установите значение `production`
- `PORT` - обычно не требуется для Netlify
- Любые другие переменные, необходимые для вашего приложения

## Деплой на Netlify

### Автоматический деплой через Git
O2pjLa12b6NDfv28
1. Войдите в свой аккаунт Netlify
2. Нажмите "New site from Git"
3. Выберите провайдер Git (GitHub, GitLab или Bitbucket) и авторизуйтесь
4. Выберите репозиторий с вашим проектом
5. Настройте параметры сборки:
   - Build command: `npm run build`
   - Publish directory: `client/build`
6. Нажмите "Advanced build settings" и добавьте все необходимые переменные окружения
7. Нажмите "Deploy site"

### Ручной деплой с помощью Netlify CLI

1. Установите Netlify CLI: `npm install -g netlify-cli`
2. Авторизуйтесь: `netlify login`
3. Инициализируйте проект: `netlify init`
4. Следуйте инструкциям по настройке
5. Настройте переменные окружения: `netlify env:set KEY VALUE`
6. Деплой: `netlify deploy --prod`

## После деплоя

1. Проверьте функциональность приложения на предоставленном Netlify домене
2. Если необходимо, настройте собственный домен в настройках сайта Netlify
3. Проверьте, что серверные функции работают корректно через вкладку "Functions" в панели управления Netlify

## Устранение неполадок

Если возникают проблемы при деплое:
1. Проверьте логи сборки и функций в панели управления Netlify
2. Убедитесь, что все переменные окружения настроены корректно
3. Проверьте, что файл `netlify.toml` настроен правильно
4. Проверьте подключение к MongoDB Atlas из функций Netlify

## Оптимизация

Для улучшения производительности можно:
1. Настроить кэширование запросов в Netlify
2. Использовать Netlify Edge Functions для критически важного кода
3. Настроить CDN для статических ресурсов
4. Оптимизировать индексы в MongoDB Atlas 